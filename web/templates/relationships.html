<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关系管理 - Uros Restron</title>
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-title">Uros Restron</h1>
            <div class="nav-links">
                <a href="/" class="nav-link">首页</a>
                <a href="/types" class="nav-link">类型管理</a>
                <a href="/things" class="nav-link">事物管理</a>
                <a href="/behaviors" class="nav-link">行为管理</a>
                <a href="/relationships" class="nav-link active">关系管理</a>
                <a href="/actors" class="nav-link">Actor管理</a>
                <a href="/graph" class="nav-link">关系图</a>
            </div>
        </div>
    </nav>

    <main class="container">
        <div class="page-header">
            <h2>关系管理</h2>
            <button class="btn btn-primary" onclick="showCreateRelationshipModal()">创建新关系</button>
        </div>

        <div class="filter-bar">
            <select id="typeFilter" onchange="filterRelationships()">
                <option value="">所有类型</option>
                <option value="contains">包含关系</option>
                <option value="owns">拥有关系</option>
                <option value="collaborates">协作关系</option>
                <option value="depends_on">依赖关系</option>
                <option value="composes">组合关系</option>
                <option value="influences">影响关系</option>
                <option value="relates_to">关联关系</option>
            </select>
            <input type="text" id="searchInput" placeholder="搜索关系..." onkeyup="searchRelationships()">
        </div>

        <div class="relationships-grid" id="relationshipsGrid">
            <!-- 关系卡片将在这里动态加载 -->
        </div>
    </main>

    <!-- 创建关系模态框 -->
    <div id="createRelationshipModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>创建关系</h3>
                <span class="close" onclick="closeCreateRelationshipModal()">&times;</span>
            </div>
            <form id="createRelationshipForm">
                <div class="form-group">
                    <label for="sourceId">源事物</label>
                    <select id="sourceId" name="sourceId" required>
                        <option value="">请选择源事物</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="targetId">目标事物</label>
                    <select id="targetId" name="targetId" required>
                        <option value="">请选择目标事物</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="relationshipType">关系类型</label>
                    <select id="relationshipType" name="type" required>
                        <option value="">请选择关系类型</option>
                        <option value="contains">包含</option>
                        <option value="owns">拥有</option>
                        <option value="collaborates">协作</option>
                        <option value="depends_on">依赖</option>
                        <option value="composes">组合</option>
                        <option value="influences">影响</option>
                        <option value="relates_to">关联</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="relationshipName">关系名称</label>
                    <input type="text" id="relationshipName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="relationshipDescription">关系描述</label>
                    <textarea id="relationshipDescription" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="relationshipProperties">关系属性 (JSON格式)</label>
                    <textarea id="relationshipProperties" name="properties" rows="4" placeholder='{"key": "value"}'></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeCreateRelationshipModal()" class="btn btn-secondary">取消</button>
                    <button type="submit" class="btn btn-primary">创建</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 关系详情模态框 -->
    <div id="relationshipDetailModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>关系详情</h3>
                <span class="close" onclick="closeRelationshipDetailModal()">&times;</span>
            </div>
            <div id="relationshipDetailContent">
                <!-- 关系详情将在这里动态加载 -->
            </div>
        </div>
    </div>

    <script src="/static/js/relationships.js"></script>
</body>
</html>
